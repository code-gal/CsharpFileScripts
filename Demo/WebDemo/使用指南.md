# WebDemo ä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨æœåŠ¡å™¨

åœ¨ `WebDemo` ç›®å½•ä¸‹è¿è¡Œ:

```bash
dotnet run WebDemo.cs
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:5000` å¯åŠ¨ã€‚

### 2. è®¿é—®ç½‘ç«™

æ‰“å¼€æµè§ˆå™¨è®¿é—®:
- **ä¸»é¡µ**: http://localhost:5000
- **ç¤ºä¾‹é¡µ**: http://localhost:5000/example.html
- **æ–‡ä»¶æµè§ˆ**: http://localhost:5000/browse
- **å¥åº·æ£€æŸ¥**: http://localhost:5000/health

## ğŸ“ æ·»åŠ ä½ çš„ç½‘ç«™å†…å®¹

### æ–¹æ³• 1: æ›¿æ¢ç°æœ‰æ–‡ä»¶

ç›´æ¥ç¼–è¾‘ `www/index.html` æ–‡ä»¶,æˆ–è€…åˆ é™¤å®ƒå¹¶åˆ›å»ºä½ è‡ªå·±çš„é¦–é¡µã€‚

### æ–¹æ³• 2: æ·»åŠ æ–°æ–‡ä»¶

åœ¨ `www` æ–‡ä»¶å¤¹ä¸­æ·»åŠ ä½ çš„ HTMLã€CSSã€JS æ–‡ä»¶:

```
www/
â”œâ”€â”€ index.html          # é¦–é¡µ
â”œâ”€â”€ about.html          # å…³äºé¡µé¢
â”œâ”€â”€ contact.html        # è”ç³»é¡µé¢
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ style.css      # æ ·å¼è¡¨
â”‚   â””â”€â”€ custom.css     # è‡ªå®šä¹‰æ ·å¼
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ app.js         # åº”ç”¨è„šæœ¬
â”‚   â””â”€â”€ utils.js       # å·¥å…·å‡½æ•°
â””â”€â”€ images/
    â”œâ”€â”€ logo.png       # Logo
    â””â”€â”€ banner.jpg     # æ¨ªå¹…
```

### æ–¹æ³• 3: æ•´ä¸ªç½‘ç«™è¿ç§»

å¦‚æœä½ å·²æœ‰å®Œæ•´çš„é™æ€ç½‘ç«™,ç›´æ¥å°†æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ° `www` æ–‡ä»¶å¤¹å³å¯ã€‚

```bash
# åˆ é™¤ç°æœ‰å†…å®¹
Remove-Item -Recurse -Force www\*

# å¤åˆ¶ä½ çš„ç½‘ç«™
Copy-Item -Recurse C:\Path\To\Your\Website\* www\
```

## ğŸ¯ å¸¸è§ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: æ‰˜ç®¡ä¸ªäººåšå®¢

```
www/
â”œâ”€â”€ index.html
â”œâ”€â”€ posts/
â”‚   â”œâ”€â”€ 2024-01-01-first-post.html
â”‚   â””â”€â”€ 2024-01-02-second-post.html
â””â”€â”€ assets/
    â”œâ”€â”€ css/
    â””â”€â”€ images/
```

### åœºæ™¯ 2: é¡¹ç›®æ–‡æ¡£ç½‘ç«™

```
www/
â”œâ”€â”€ index.html
â”œâ”€â”€ getting-started.html
â”œâ”€â”€ api-reference.html
â”œâ”€â”€ examples.html
â””â”€â”€ css/
    â””â”€â”€ docs.css
```

### åœºæ™¯ 3: å•é¡µåº”ç”¨ (SPA)

å¦‚æœä½ ä½¿ç”¨ Reactã€Vue ç­‰æ¡†æ¶æ„å»ºçš„ SPA:

1. æ„å»ºä½ çš„åº”ç”¨: `npm run build`
2. å°† `build` æˆ– `dist` æ–‡ä»¶å¤¹çš„å†…å®¹å¤åˆ¶åˆ° `www`
3. å¦‚éœ€è·¯ç”±æ”¯æŒ,ä¿®æ”¹ `WebDemo.cs` çš„ 404 å¤„ç†

## âš™ï¸ é…ç½®é€‰é¡¹

### æ–¹å¼ 1: ä½¿ç”¨é…ç½®æ–‡ä»¶ (æ¨è)

ç¼–è¾‘ `WebDemo.settings.json`:

```json
{
  "Port": 8080,           // ä¿®æ”¹ç«¯å£
  "Host": "localhost",    // ä¸»æœºå
  "WebRoot": "www",       // Web æ ¹ç›®å½•
  "Features": {
    "DirectoryBrowsing": true,   // æ˜¯å¦å¯ç”¨ç›®å½•æµè§ˆ
    "DetailedErrors": true       // æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†é”™è¯¯
  }
}
```

### æ–¹å¼ 2: å‘½ä»¤è¡Œå‚æ•°

```bash
dotnet run WebDemo.cs -- --Port 8080
```

### æ–¹å¼ 3: ä¿®æ”¹ä»£ç 

ç¼–è¾‘ `WebDemo.cs`,æ‰¾åˆ°:

```csharp
var port = builder.Configuration.GetValue<int>("Port", 5000); // ä¿®æ”¹é»˜è®¤ç«¯å£
```

### ç¦ç”¨ç›®å½•æµè§ˆ

å¦‚æœä¸éœ€è¦ `/browse` åŠŸèƒ½,æ³¨é‡Šæ‰:

```csharp
// app.UseDirectoryBrowser(...);
```

### æ·»åŠ  HTTPS

```csharp
options.ListenAnyIP(5001, listenOptions =>
{
    listenOptions.UseHttps();
});
```

### å¯ç”¨ CORS (è·¨åŸŸ)

æ·»åŠ ä»¥ä¸‹ä»£ç :

```csharp
builder.Services.AddCors();

app.UseCors(policy =>
{
    policy.AllowAnyOrigin()
          .AllowAnyMethod()
          .AllowAnyHeader();
});
```

## ğŸ”§ é«˜çº§æŠ€å·§

### 1. å¯ç”¨å“åº”å‹ç¼©

æ·»åŠ é¢„å¤„ç†å™¨æŒ‡ä»¤:

```csharp
#:package Microsoft.AspNetCore.ResponseCompression

builder.Services.AddResponseCompression();
app.UseResponseCompression();
```

### 2. è‡ªå®šä¹‰ MIME ç±»å‹

```csharp
var provider = new FileExtensionContentTypeProvider();
provider.Mappings[".myapp"] = "application/x-myapp";
```

### 3. æ·»åŠ åŸºæœ¬è®¤è¯

```csharp
app.Use(async (context, next) =>
{
    var auth = context.Request.Headers["Authorization"];
    if (auth != "Bearer my-secret-token")
    {
        context.Response.StatusCode = 401;
        return;
    }
    await next();
});
```

### 4. è¯·æ±‚æ—¥å¿—

```csharp
app.Use(async (context, next) =>
{
    Console.WriteLine($"{DateTime.Now} {context.Request.Method} {context.Request.Path}");
    await next();
});
```

## ğŸ“¦ éƒ¨ç½²

### å‘å¸ƒä¸ºå¯æ‰§è¡Œæ–‡ä»¶

```bash
# å‘å¸ƒ (ä¾èµ–ç³»ç»Ÿ .NET è¿è¡Œæ—¶)
dotnet publish WebDemo.cs -c Release -o ./publish

# å‘å¸ƒ (ç‹¬ç«‹åŒ…å«è¿è¡Œæ—¶)
dotnet publish WebDemo.cs -c Release -r win-x64 --self-contained -o ./publish
```

### ä½œä¸º Windows æœåŠ¡è¿è¡Œ

1. æ·»åŠ åŒ…å¼•ç”¨:
```csharp
#:package Microsoft.Extensions.Hosting.WindowsServices
```

2. ä¿®æ”¹ä»£ç :
```csharp
builder.Services.AddWindowsService();
```

3. å®‰è£…æœåŠ¡:
```bash
sc create WebDemo binPath="C:\path\to\WebDemo.exe"
sc start WebDemo
```

### ä½¿ç”¨ IIS åå‘ä»£ç†

1. å®‰è£… URL Rewrite å’Œ ARR
2. é…ç½®åå‘ä»£ç†è§„åˆ™æŒ‡å‘ `localhost:5000`

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1: ç«¯å£è¢«å ç”¨

```
Error: Failed to bind to address
```

**è§£å†³**: 
- ä¿®æ”¹ `WebDemo.settings.json` ä¸­çš„ç«¯å£å·
- æˆ–ç»ˆæ­¢å ç”¨è¿›ç¨‹: `netstat -ano | findstr :5000`

### é—®é¢˜ 2: IPv6 é—®é¢˜

å¦‚æœçœ‹åˆ° `http://[::]:5000` æ— æ³•è®¿é—®:
- å·²ä¿®å¤! ç¨‹åºç°åœ¨æ˜ç¡®ä½¿ç”¨ IPv4 (127.0.0.1 å’Œ 0.0.0.0)
- ç›´æ¥è®¿é—® `http://localhost:5000` å³å¯

### é—®é¢˜ 3: JSON åºåˆ—åŒ–é”™è¯¯

```
System.NotSupportedException: JsonTypeInfo metadata...
```

**è§£å†³**: 
- å·²ä¿®å¤! æ·»åŠ äº† `AppJsonSerializerContext` æ”¯æŒ
- ç¨‹åºç°åœ¨æ”¯æŒ AOT ç¼–è¯‘

### é—®é¢˜ 3: æ–‡ä»¶ 404

**æ£€æŸ¥**:
- æ–‡ä»¶æ˜¯å¦åœ¨ `www` æ–‡ä»¶å¤¹ä¸­
- æ–‡ä»¶è·¯å¾„å¤§å°å†™æ˜¯å¦æ­£ç¡®
- è®¿é—® `/browse` æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨

### é—®é¢˜ 4: æ ·å¼/è„šæœ¬ä¸åŠ è½½

**æ£€æŸ¥**:
- è·¯å¾„æ˜¯å¦ä»¥ `/` å¼€å¤´ (ç»å¯¹è·¯å¾„)
- æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
- MIME ç±»å‹æ˜¯å¦æ­£ç¡®

### é—®é¢˜ 5: æƒé™é”™è¯¯

**è§£å†³**: 
- ç¡®ä¿æœ‰ `www` æ–‡ä»¶å¤¹çš„è¯»å–æƒé™
- Windows: å³é”® â†’ å±æ€§ â†’ å®‰å…¨

## ğŸ’¡ æœ€ä½³å®è·µ

1. **ä½¿ç”¨ç›¸å¯¹è·¯å¾„**: é“¾æ¥å’Œèµ„æºä½¿ç”¨ `/` å¼€å¤´çš„ç»å¯¹è·¯å¾„
2. **ç»„ç»‡ç»“æ„**: æŒ‰ç±»å‹åˆ†æ–‡ä»¶å¤¹ (css, js, images)
3. **å‹ç¼©èµ„æº**: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‹ç¼©çš„ CSS/JS
4. **ç¼“å­˜ç­–ç•¥**: é™æ€èµ„æºæ·»åŠ ç‰ˆæœ¬å·æˆ–å“ˆå¸Œ
5. **å®‰å…¨æ€§**: ä¸è¦åœ¨ `www` ä¸­æ”¾ç½®æ•æ„Ÿä¿¡æ¯

## ğŸ“š ç¤ºä¾‹é¡¹ç›®

æŸ¥çœ‹ `www` æ–‡ä»¶å¤¹ä¸­çš„ç¤ºä¾‹:
- `index.html` - ç²¾ç¾çš„æ¬¢è¿é¡µé¢
- `example.html` - CSS/JS é›†æˆç¤ºä¾‹
- `css/style.css` - æ ·å¼è¡¨ç¤ºä¾‹
- `js/app.js` - JavaScript ç¤ºä¾‹

## ğŸ†˜ è·å–å¸®åŠ©

- æŸ¥çœ‹ `README.md` äº†è§£æ›´å¤šæŠ€æœ¯ç»†èŠ‚
- è®¿é—® `/health` ç«¯ç‚¹æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€
- ä½¿ç”¨ `/browse` æµè§ˆæ–‡ä»¶ç»“æ„

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«! ğŸ‰**
