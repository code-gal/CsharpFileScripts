# 🎵 智能音乐整理大师 Pro - 新功能说明

## ✨ 新增功能（v2.0）

### 1. 🎼 音频详细信息分析
**功能描述：**
- 检测音频技术参数：采样率、比特深度、声道数、编码格式
- 统计分析：显示最常见的参数配置
- 质量建议：标记低质量文件（<44.1kHz 或 <192kbps）

**使用场景：**
- 了解音乐库的音频质量分布
- 找出需要升级的低质量文件
- 确保音频参数统一

**示例输出：**
```
🎵 音频参数统计
┌────────────┬──────────────────────┬────────────────┐
│ 参数       │ 最常见值             │ 其他值         │
├────────────┼──────────────────────┼────────────────┤
│ 📊 采样率  │ 44100 Hz (256 首)    │ 48000 Hz, ...  │
│ 🎚️  比特深度│ 16 bit (280 首)      │ 24 bit, ...    │
│ 🔊 声道    │ 立体声 (300 首)      │                │
└────────────┴──────────────────────┴────────────────┘
```

---

### 2. 🔊 音量标准化检测（ReplayGain）
**功能描述：**
- 检测哪些文件有 ReplayGain 音量标签
- 统计覆盖率
- 导出缺少音量标签的文件清单

**使用场景：**
- 避免播放时歌曲间音量忽大忽小
- 找出需要添加 ReplayGain 的文件
- 使用 MP3Gain 等工具批量处理

**什么是 ReplayGain？**
一种音量标准化技术，在不改变音频数据的情况下，在文件中记录建议的播放音量调整值。支持 ReplayGain 的播放器会自动调整音量，让所有歌曲听起来音量一致。

**示例输出：**
```
📊 ReplayGain 统计
┌─────────────────┬────────────────┐
│ ✅ 有音量标签   │ 150 首 (50%)   │
│ ⚠️  无音量标签   │ 150 首         │
└─────────────────┴────────────────┘
```

---

### 3. 🎧 智能生成播放列表
**功能描述：**
- 生成 M3U8 格式播放列表（UTF-8 编码，兼容性好）
- 支持多种分组方式：
  - 按艺术家分组
  - 按专辑分组
  - 高品质音乐（320kbps+/无损）
  - 按年份分组
  - 完整音乐库

**使用场景：**
- 快速创建分类播放列表
- 导入到 VLC、foobar2000、网易云音乐等播放器
- 按心情/场景筛选音乐

**生成位置：**
`源目录/Playlists/` 文件夹

**示例：**
```
Playlists/
├── 周杰伦.m3u8
├── Taylor Swift.m3u8
├── ⭐ 高品质音乐.m3u8
├── 2023年.m3u8
└── 🎵 完整音乐库.m3u8
```

---

### 4. 📄 歌词智能分析
**功能描述：**
- 检测歌词文件状态：有/无歌词
- 语言识别：中文、英文、日文
- 翻译检测：标记缺少中英对照的歌词
- 生成详细报告

**使用场景：**
- 找出缺少歌词的音乐
- 标记缺少翻译的歌词（方便后续手动添加）
- 了解歌词库的完整度

**智能功能：**
✅ **已实现：**
- 检测歌词语言
- 标记缺少翻译的文件
- 列出无歌词的音乐

📝 **预留接口（未实现）：**
- Whisper 语音识别生成歌词
  - 原因：歌曲音频复杂（伴奏、和声、混响）
  - 识别准确度可能较低
  - 建议：优先从歌词网站下载现成歌词

**示例输出：**
```
📊 歌词分析统计
┌─────────────────┬──────────────┐
│ 📊 总音乐文件   │ 300 首       │
│ ✅ 有歌词文件   │ 250 首 (83%) │
│ ❌ 无歌词文件   │ 50 首        │
│ ✅ 有中英对照   │ 120 首       │
│ ⚠️  缺少翻译    │ 130 首       │
└─────────────────┴──────────────┘
```

---

### 5. 🖼️ 缺少封面报告
**功能描述：**
- 检测专辑是否有嵌入封面图片
- 生成缺少封面的专辑清单
- 提供获取封面的建议

**使用场景：**
- 找出需要添加封面的专辑
- 导出清单后批量下载封面
- 使用 Mp3tag 等工具嵌入封面

**获取封面建议：**
1. 在线平台：网易云音乐、QQ音乐、Apple Music
2. 封面数据库：Cover Art Archive、Discogs
3. 搜索引擎：Google 图片「艺术家 专辑名 cover」
4. 工具：Mp3tag、MusicBrainz Picard

**示例输出：**
```
🖼️  封面统计
┌─────────────┬──────────────┐
│ 📀 总专辑数 │ 78 张        │
│ ✅ 有封面   │ 65 张 (83%)  │
│ ❌ 无封面   │ 13 张        │
└─────────────┴──────────────┘

❌ 缺少封面的专辑：
  • 周杰伦 - 叶惠美
  • Taylor Swift - 1989
  ...
```

---

## 🎯 使用流程示例

```bash
# 1. 运行程序
dotnet run SmartMusicOrganizerPro.cs

# 2. 设置源目录
📂 set-source → C:\Users\你\Music

# 3. 扫描分析
🔍 scan → 发现 500 首，分析质量和标签

# 4. 高级分析
🎼 audio-info → 查看音频参数
🔊 volume-check → 检测音量标签
📄 lyrics-analysis → 分析歌词状态
🖼️  cover-report → 检测封面

# 5. 生成播放列表
🎧 playlist → 选择「按艺术家」「高品质」等

# 6. 整理音乐库
📁 organize → 智能去重+按质量分级

# 7. 生成完整报告
📊 report → 健康度评分 + 详细分析
```

---

## 📋 导出的报告文件

程序会在源目录生成以下报告：

1. `需要音量标准化的文件_时间戳.txt` - 缺少 ReplayGain 的文件
2. `歌词分析报告_时间戳.txt` - 歌词语言分析和缺失情况
3. `缺少封面的专辑_时间戳.txt` - 需要添加封面的专辑清单
4. `音乐库报告_时间戳.txt` - 完整健康度报告
5. `Playlists/` - 播放列表文件夹

---

## 💡 实用建议

### 音质提升路线
1. 运行「音频详细信息分析」找出低质量文件
2. 从高品质音源重新下载（无损 > 320kbps）
3. 使用「智能去重」保留最佳版本

### 歌词完善路线
1. 运行「歌词智能分析」生成报告
2. 从歌词网站下载缺失的歌词（推荐：网易云、QQ音乐）
3. 手动编辑 .lrc 文件添加翻译
4. 不推荐使用 Whisper（音乐识别准确度低）

### 封面补全路线
1. 运行「缺少封面报告」导出清单
2. 从音乐平台或 Google 图片下载封面
3. 使用 Mp3tag 批量嵌入封面到文件

### 音量统一路线
1. 运行「音量标准化检测」找出无标签文件
2. 使用 MP3Gain（MP3）或 foobar2000 ReplayGain Scanner（通用）
3. 批量添加 ReplayGain 标签

---

## 🔧 推荐工具

- **Mp3tag** - 音乐标签编辑、封面嵌入
- **MusicBrainz Picard** - 自动识别音乐并补全标签
- **MP3Gain** - 添加 ReplayGain 音量标签
- **foobar2000** - 强大的音乐播放器，支持 ReplayGain

---

## ⚡ 性能提示

- 大型音乐库（>1000首）扫描可能需要几分钟
- 「音频详细信息分析」默认只分析前100首（速度考虑）
- 建议在 SSD 上运行，提升扫描速度
- 缓存机制：扫描一次后，多个功能可共用数据

---

生成时间：2025-12-06
版本：v2.0 Pro
